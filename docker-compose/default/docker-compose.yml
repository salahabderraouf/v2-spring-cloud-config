services:
    configserver:
        image: "salah1995/configserver:s6"
        container_name: configserver-ms
        ports:
            - "8071:8071"
        deploy:
            resources:
                limits:
                    memory: 700M
        networks:
            - eazybank
        environment:
            SPRING_APPLICATION_NAME: "accounts"
            SPRING_CONFIG_IMPORT: "configserver:http://configserver:8071"
            SPRING_PROFILES_ACTIVE: "default"

    accounts:
        image: "salah1995/accounts:s6"
        container_name: accounts-ms
        ports:
            - "8080:8080"
        deploy:
            resources:
                limits:
                    memory: 700M
        networks:
            - eazybank

    loans:
        image: "salah1995/loans:s6"
        container_name: loans-ms
        ports:
            - "8090:8090"
        deploy:
            resources:
                limits:
                    memory: 700M
        networks:
            - eazybank

    cards:
        image: "salah1995/cards:s6"
        container_name: cards-ms
        ports:
            - "9000:9000"
        deploy:
            resources:
                limits:
                    memory: 700M
        networks:
            - eazybank

networks:
    eazybank:
        driver: "bridge"